<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>English Fun Practice ‚Äî Wireframe Demo</title>
    <style>
      :root {
        --bg: #e9f3ff;
        --card: #ffffff;
        --primary: #8ec5ff;
        --accent: #ffd166;
        --muted: #e8eef6;
        --text: #05263a;
        --success: #4caf50;
        --danger: #ff6b6b;
        --btn-radius: 14px;
        font-family: "Segoe UI", Roboto, system-ui, -apple-system,
          "Helvetica Neue", Arial;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        background: linear-gradient(180deg, var(--bg), #f4fbff);
      }
      .app {
        max-width: 420px;
        margin: 18px auto;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(6, 30, 60, 0.08);
      }

      header {
        background: var(--primary);
        padding: 18px 20px;
        color: var(--text);
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .logo {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
      }
      header h1 {
        margin: 0;
        font-size: 18px;
      }

      main {
        background: var(--card);
        padding: 18px;
        min-height: 560px;
      }

      /* Home: topic grid */
      .topics {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }
      .topic {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 14px;
        border-radius: 14px;
        background: var(--muted);
        cursor: pointer;
        border: 1px solid rgba(0, 0, 0, 0.03);
      }
      .topic .icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
      }
      .topic .label {
        font-size: 18px;
      }

      .home-footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #315e7a;
      }

      /* Quiz screen */
      .quiz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }
      .question-card {
        background: var(--muted);
        border-radius: 14px;
        padding: 18px;
        text-align: center;
      }
      .question-card h2 {
        margin: 0 0 12px 0;
        font-size: 20px;
        color: var(--text);
      }
      .image-area {
        height: 160px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 88px;
      }

      .options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 14px;
      }
      .option {
        padding: 14px;
        border-radius: 12px;
        background: #f0f6fb;
        border: 1px solid rgba(0, 0, 0, 0.03);
        font-size: 18px;
        cursor: pointer;
        user-select: none;
      }
      .option.correct {
        background: linear-gradient(90deg, #dff7e2, #eaffef);
        border-color: var(--success);
      }
      .option.wrong {
        animation: shake 0.4s;
        border-color: var(--danger);
        background: #ffecec;
      }

      @keyframes shake {
        0% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-6px);
        }
        50% {
          transform: translateX(6px);
        }
        75% {
          transform: translateX(-4px);
        }
        100% {
          transform: translateX(0);
        }
      }

      .quiz-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        color: #1f5c84;
      }

      /* Result */
      .result {
        padding: 26px;
        border-radius: 14px;
        text-align: center;
        background: var(--muted);
      }
      .star {
        font-size: 72px;
        margin: 8px 0;
      }
      .result p {
        margin: 8px 0;
        font-size: 18px;
      }

      /* Buttons */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 12px 18px;
        border-radius: var(--btn-radius);
        background: #fff;
        border: 1px solid rgba(0, 0, 0, 0.06);
        cursor: pointer;
        font-weight: 600;
      }
      .btn.primary {
        background: var(--primary);
        color: #07324a;
        border: none;
      }
      .btn.block {
        display: block;
        width: 100%;
        margin-top: 10px;
      }

      footer {
        background: transparent;
        padding: 12px 18px;
        text-align: center;
        color: #6b8aa0;
      }

      /* small helpers */
      .hidden {
        display: none;
      }
      .muted {
        color: #6b8aa0;
        font-size: 14px;
      }

      /* responsive small */
      @media (max-width: 420px) {
        .app {
          margin: 6px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app" role="application" aria-label="English Fun Practice">
      <header>
        <div class="logo">üê∞</div>
        <h1>English Fun Practice</h1>
      </header>

      <main>
        <!-- HOME -->
        <section id="home" class="screen">
          <div class="topics">
            <!-- topics injected by JS -->
          </div>

          <div class="home-footer">
            <div class="muted">
              Progress: <span id="progress-text">0/0 units</span>
            </div>
            <div style="display: flex; gap: 10px; align-items: center">
              <button class="btn" id="settings-btn">üîä Settings</button
              ><button class="btn" id="profile-btn">üèÖ Ranking</button>
            </div>
          </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz" class="screen hidden">
          <div class="quiz-header">
            <div id="unit-title" style="font-weight: 700; color: #184f70">
              Unit
            </div>
            <div class="muted">
              Question <span id="q-index">1</span>/<span id="q-total">10</span>
            </div>
          </div>

          <div class="question-card">
            <h2 id="question-text">What color is this?</h2>
            <div class="image-area" id="question-image">üçé</div>

            <div class="options" id="options"></div>

            <div class="quiz-controls">
              <div>
                <button id="play-audio" class="btn">üîä Play again</button>
              </div>
              <div class="muted">Time: <span id="timer">--</span>s</div>
            </div>
          </div>

          <div style="margin-top: 12px; display: flex; gap: 10px">
            <button class="btn" id="skip-btn">‚è≠ Skip</button>
            <button class="btn primary" id="next-btn">Next</button>
          </div>
        </section>

        <!-- RESULT -->
        <section id="result" class="screen hidden">
          <div class="result">
            <h2>Great job!</h2>
            <div class="star">‚≠êÔ∏è</div>
            <p id="score-text">You got 0/10 stars</p>
            <p id="rank-text">Rank: -</p>

            <button class="btn block" id="try-again">‚Ü∫ Try again</button>
            <button class="btn block" id="next-unit">‚ñ∂ Next Unit</button>
            <button class="btn block" id="back-home">üè† Back to Home</button>
          </div>
        </section>
      </main>

      <footer>Demo wireframe ‚Äî interactive prototype</footer>
    </div>

    <script>
      // --- Sample data set ---
      const topics = [
        {
          id: "colors",
          label: "Colors",
          icon: "üé®",
          questions: [
            {
              type: "image-choice",
              prompt: "What color is this?",
              image: "üçé",
              options: ["red", "green", "blue", "yellow"],
              answer: "red",
            },
            {
              type: "image-choice",
              prompt: "What color is this?",
              image: "üçå",
              options: ["red", "green", "yellow", "purple"],
              answer: "yellow",
            },
            {
              type: "image-choice",
              prompt: "What color is this?",
              image: "üçè",
              options: ["red", "green", "blue", "brown"],
              answer: "green",
            },
            {
              type: "image-choice",
              prompt: "What color is this?",
              image: "üíô",
              options: ["red", "blue", "green", "black"],
              answer: "blue",
            },
            {
              type: "image-choice",
              prompt: "What color is this?",
              image: "üå∑",
              options: ["pink", "yellow", "blue", "gray"],
              answer: "pink",
            },
          ],
        },
        {
          id: "fruits",
          label: "Fruits",
          icon: "üçé",
          questions: [
            {
              type: "image-choice",
              prompt: "What is this?",
              image: "üçé",
              options: ["apple", "banana", "orange", "grape"],
              answer: "apple",
            },
            {
              type: "image-choice",
              prompt: "What is this?",
              image: "üçå",
              options: ["apple", "banana", "pear", "grape"],
              answer: "banana",
            },
          ],
        },
        {
          id: "animals",
          label: "Animals",
          icon: "üê∂",
          questions: [
            {
              type: "image-choice",
              prompt: "Which animal is this?",
              image: "üê∂",
              options: ["cat", "dog", "cow", "sheep"],
              answer: "dog",
            },
          ],
        },
        {
          id: "family",
          label: "Family",
          icon: "üè†",
          questions: [
            {
              type: "image-choice",
              prompt: "Who is this?",
              image: "üë®‚Äçüë©‚Äçüëß",
              options: ["mother", "father", "family", "sister"],
              answer: "family",
            },
          ],
        },
        {
          id: "clothes",
          label: "Clothes",
          icon: "üëï",
          questions: [
            {
              type: "image-choice",
              prompt: "What is this?",
              image: "üëï",
              options: ["shirt", "shoes", "hat", "dress"],
              answer: "shirt",
            },
          ],
        },
      ];

      // App state
      let currentTopic = null;
      let currentQuestions = [];
      let qIndex = 0;
      let score = 0;
      let timerInterval = null;
      let timeStart = null;

      // DOM refs
      const topicsContainer = document.querySelector(".topics");
      const progressText = document.getElementById("progress-text");
      const homeScreen = document.getElementById("home");
      const quizScreen = document.getElementById("quiz");
      const resultScreen = document.getElementById("result");
      const unitTitle = document.getElementById("unit-title");
      const qIndexText = document.getElementById("q-index");
      const qTotalText = document.getElementById("q-total");
      const questionText = document.getElementById("question-text");
      const questionImage = document.getElementById("question-image");
      const optionsEl = document.getElementById("options");
      const timerText = document.getElementById("timer");
      const playAudioBtn = document.getElementById("play-audio");
      const nextBtn = document.getElementById("next-btn");
      const skipBtn = document.getElementById("skip-btn");
      const scoreText = document.getElementById("score-text");
      const rankText = document.getElementById("rank-text");

      // initialize
      function init() {
        renderTopics();
        updateProgress();
        attachHandlers();
      }

      function renderTopics() {
        topicsContainer.innerHTML = "";
        topics.forEach((t) => {
          const el = document.createElement("div");
          el.className = "topic";
          el.innerHTML = `<div class="icon">${t.icon}</div><div class="label">${t.label}</div>`;
          el.addEventListener("click", () => startTopic(t));
          topicsContainer.appendChild(el);
        });
      }

      function updateProgress() {
        const done = 0; // sample static, could store in localStorage
        progressText.textContent = `${done}/${topics.length} units`;
      }

      function startTopic(topic) {
        currentTopic = topic;
        currentQuestions = shuffle(Array.from(topic.questions)).slice(
          0,
          Math.min(10, topic.questions.length)
        );
        qIndex = 0;
        score = 0;
        showScreen("quiz");
        unitTitle.textContent = topic.label;
        qTotalText.textContent = currentQuestions.length;
        renderQuestion();
      }

      function renderQuestion() {
        clearTimer();
        n;
      }

      function showScreen(name) {
        homeScreen.classList.add("hidden");
        quizScreen.classList.add("hidden");
        resultScreen.classList.add("hidden");
        if (name === "home") homeScreen.classList.remove("hidden");
        if (name === "quiz") quizScreen.classList.remove("hidden");
        if (name === "result") resultScreen.classList.remove("hidden");
      }

      function renderQuestion() {
        const q = currentQuestions[qIndex];
        qIndexText.textContent = qIndex + 1;
        questionText.textContent = q.prompt;
        questionImage.textContent = q.image || "";
        optionsEl.innerHTML = "";
        q.options.forEach((opt) => {
          const b = document.createElement("div");
          b.className = "option";
          b.tabIndex = 0;
          b.textContent = opt;
          b.addEventListener("click", () => selectOption(b, opt, q));
          optionsEl.appendChild(b);
        });
        startTimer();
      }

      function selectOption(el, opt, q) {
        disableOptions();
        clearTimer();
        if (opt === q.answer) {
          el.classList.add("correct");
          playFeedback(true);
          score++;
        } else {
          el.classList.add("wrong");
          // show correct
          const correctEl = Array.from(optionsEl.children).find(
            (c) => c.textContent === q.answer
          );
          if (correctEl) correctEl.classList.add("correct");
          playFeedback(false);
        }
      }

      function disableOptions() {
        Array.from(optionsEl.children).forEach(
          (c) => (c.style.pointerEvents = "none")
        );
      }

      function enableOptions() {
        Array.from(optionsEl.children).forEach((c) => {
          c.style.pointerEvents = "auto";
          c.classList.remove("correct", "wrong");
        });
      }

      function nextQuestion() {
        if (qIndex < currentQuestions.length - 1) {
          qIndex++;
          enableOptions();
          renderQuestion();
        } else {
          // show result
          showResult();
        }
      }

      function showResult() {
        showScreen("result");
        scoreText.textContent = `You got ${score}/${currentQuestions.length} stars`;
        const pct = score / currentQuestions.length;
        let rank = "Bronze";
        if (pct > 0.8) rank = "Gold";
        else if (pct > 0.5) rank = "Silver";
        rankText.textContent = `Rank: ${rank}`;
      }

      function attachHandlers() {
        playAudioBtn.addEventListener("click", () => {
          playQuestionAudio();
        });
        nextBtn.addEventListener("click", () => {
          nextQuestion();
        });
        skipBtn.addEventListener("click", () => {
          // skip counts as wrong
          clearTimer();
          disableOptions();
          // reveal correct
          const q = currentQuestions[qIndex];
          const correctEl = Array.from(optionsEl.children).find(
            (c) => c.textContent === q.answer
          );
          if (correctEl) correctEl.classList.add("correct");
        });

        document.getElementById("back-home").addEventListener("click", () => {
          showScreen("home");
        });
        document.getElementById("try-again").addEventListener("click", () => {
          startTopic(currentTopic);
        });
        document.getElementById("next-unit").addEventListener("click", () => {
          // pick next topic (simple rotation)
          const idx = topics.findIndex((t) => t.id === currentTopic.id);
          const next = topics[(idx + 1) % topics.length];
          startTopic(next);
        });
        document
          .getElementById("settings-btn")
          .addEventListener("click", () =>
            alert(
              "Settings demo: adjust volume or language (not implemented in prototype)."
            )
          );
        document
          .getElementById("profile-btn")
          .addEventListener("click", () =>
            alert("Ranking/Profile demo (not implemented).")
          );
      }

      function startTimer() {
        timeStart = Date.now();
        timerText.textContent = "0";
        clearTimer();
        timerInterval = setInterval(() => {
          const s = Math.floor((Date.now() - timeStart) / 1000);
          timerText.textContent = s;
          if (s >= 18) {
            // auto end question
            clearTimer();
            disableOptions();
            const q = currentQuestions[qIndex];
            const correctEl = Array.from(optionsEl.children).find(
              (c) => c.textContent === q.answer
            );
            if (correctEl) correctEl.classList.add("correct");
          }
        }, 300);
      }
      function clearTimer() {
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }
      }

      function playQuestionAudio() {
        // simple TTS for demo: speak prompt + answer choices
        if (!currentQuestions.length) return;
        const q = currentQuestions[qIndex];
        const utter = new SpeechSynthesisUtterance();
        utter.text = q.prompt + ". Options: " + q.options.join(", ");
        utter.lang = "en-US";
        speechSynthesis.cancel();
        speechSynthesis.speak(utter);
      }

      function playFeedback(ok) {
        try {
          if (ok) {
            const u = new SpeechSynthesisUtterance("Correct");
            u.lang = "en-US";
            speechSynthesis.speak(u);
          } else {
            const u = new SpeechSynthesisUtterance("Try again");
            u.lang = "en-US";
            speechSynthesis.speak(u);
          }
        } catch (e) {}
      }

      function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      // initialize app
      init();
    </script>
  </body>
</html>
