<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>B·∫£ng c·ª≠u ch∆∞∆°ng vui h·ªçc</title>
    <style>
      body {
        margin: 0;
        font-family: "Fredoka", sans-serif;
        background: #fde9b3;
      }
      .container {
        max-width: 460px;
        margin: 0 auto;
        background: #fff9ec;
        border-radius: 24px;
        padding: 24px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
      }
      h1 {
        text-align: center;
        color: #d94b1a;
        font-size: 28px;
        margin: 0;
      }
      .menu {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-top: 18px;
      }
      .menu button {
        background: #62b25a;
        color: #fff;
        border: none;
        padding: 14px;
        border-radius: 12px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
      }
      .menu button:hover {
        opacity: 0.9;
      }
      .section {
        display: none;
        background: #fff;
        border-radius: 16px;
        padding: 20px;
        margin-top: 16px;
      }
      .section.active {
        display: block;
      }
      .lesson-title {
        background: #4caf50;
        color: #fff;
        text-align: center;
        border-radius: 10px;
        padding: 8px;
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
      }
      .equation {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 18px;
        margin: 8px 0;
      }
      .equation button {
        border: none;
        background: #fff2cc;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 18px;
        cursor: pointer;
      }
      .btn {
        border: none;
        border-radius: 10px;
        padding: 10px 16px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
      }
      .btn-listen {
        background: #f9b233;
        color: white;
      }
      .btn-practice {
        background: #2196f3;
        color: white;
      }
      .practice-card {
        text-align: center;
      }
      .question {
        font-size: 22px;
        font-weight: bold;
        margin-bottom: 16px;
      }
      .choices {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      .choice {
        background: #fff;
        border: 2px solid #eee;
        border-radius: 12px;
        padding: 10px;
        font-size: 18px;
        cursor: pointer;
      }
      .choice.selected {
        background: #c8f7c5;
        border-color: #4caf50;
      }
      .result {
        text-align: center;
        padding: 20px;
      }
      .result h2 {
        color: #4caf50;
      }
      .score-board {
        font-size: 18px;
        margin: 12px 0;
      }
      .example {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
      }
      .example img {
        width: 80px;
        border-radius: 10px;
      }
      select {
        padding: 6px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üê∞ B·∫¢NG C·ª¨U CH∆Ø∆†NG NH√ÇN VUI H·ªåC</h1>
      <div class="menu" id="mainMenu">
        <button onclick="showSection('concept')">üîé L√†m quen ph√©p nh√¢n</button>
        <button onclick="showSection('lesson')">üìö H·ªçc b·∫£ng nh√¢n</button>
        <button onclick="showSection('practice')">üéÆ Luy·ªán t·∫≠p</button>
      </div>

      <div class="section" id="concept">
        <h2>üîé L√†m quen ph√©p nh√¢n</h2>
        <p>B√© h·ªçc ph√©p nh√¢n qua v√≠ d·ª• v√† h√¨nh ·∫£nh minh ho·∫° nh√©!</p>
        <div class="example">
          <img src="https://cdn-icons-png.flaticon.com/512/4151/4151022.png" />
          <div>2 nh√≥m, m·ªói nh√≥m 3 qu·∫£ t√°o ‚Üí 2 √ó 3 = 6</div>
        </div>
        <div class="example">
          <img src="https://cdn-icons-png.flaticon.com/512/3082/3082031.png" />
          <div>3 nh√≥m, m·ªói nh√≥m 2 qu·∫£ cam ‚Üí 3 √ó 2 = 6</div>
        </div>
        <div class="example">
          <img src="https://cdn-icons-png.flaticon.com/512/4151/4151009.png" />
          <div>4 nh√≥m, m·ªói nh√≥m 5 b√¥ng hoa ‚Üí 4 √ó 5 = 20</div>
        </div>
        <button class="btn btn-listen" onclick="speakConcept()">
          üîä Nghe v√≠ d·ª•
        </button>
        <button class="btn btn-practice" onclick="showSection('lesson')">
          Ti·∫øp t·ª•c h·ªçc
        </button>
      </div>

      <div class="section" id="lesson">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <div class="lesson-title">B·∫¢NG NH√ÇN</div>
          <select id="tableSelect" onchange="renderLesson()">
            <option value="1">√ó1</option>
            <option value="2">√ó2</option>
            <option value="3" selected>√ó3</option>
            <option value="4">√ó4</option>
            <option value="5">√ó5</option>
            <option value="6">√ó6</option>
            <option value="7">√ó7</option>
            <option value="8">√ó8</option>
            <option value="9">√ó9</option>
          </select>
        </div>
        <div id="equations"></div>
        <div
          style="
            display: flex;
            justify-content: space-between;
            margin-top: 14px;
          "
        >
          <button class="btn btn-listen" id="btnListenAll">
            üîä Nghe t·∫•t c·∫£
          </button>
          <button class="btn btn-practice" onclick="showSection('practice')">
            üß† Luy·ªán t·∫≠p
          </button>
        </div>
      </div>

      <div class="section" id="practice">
        <div class="practice-card">
          <div class="question" id="question"></div>
          <div class="choices" id="choices"></div>
          <button class="btn btn-listen" onclick="checkAnswer()">
            Ki·ªÉm tra
          </button>
          <button class="btn btn-practice" onclick="nextQuestion()">
            C√¢u ti·∫øp
          </button>
        </div>
      </div>

      <div class="section" id="result">
        <div class="result">
          <h2>üéâ Ho√†n th√†nh luy·ªán t·∫≠p!</h2>
          <div class="score-board">
            ƒêi·ªÉm c·ªßa b√©: <span id="scoreValue">0</span>
          </div>
          <button class="btn btn-practice" onclick="restart()">
            üîÅ H·ªçc l·∫°i
          </button>
          <button class="btn btn-listen" onclick="showSection('mainMenu')">
            üè† Trang ch·ªß
          </button>
        </div>
      </div>
    </div>

    <script>
      function showSection(id) {
        document
          .querySelectorAll(".section")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(id).classList.add("active");
        if (id === "lesson") renderLesson();
        if (id === "practice") nextQuestion();
      }

      function speak(text) {
        try {
          const synth = window.speechSynthesis;
          const msg = new SpeechSynthesisUtterance(text);
          msg.lang = "vi-VN";
          synth.cancel();
          synth.speak(msg);
        } catch (e) {
          alert("Thi·∫øt b·ªã kh√¥ng h·ªó tr·ª£ ƒë·ªçc √¢m thanh");
        }
      }

      function speakConcept() {
        const sentences = [
          "Hai nh√≥m, m·ªói nh√≥m ba qu·∫£ t√°o. Hai nh√¢n ba b·∫±ng s√°u.",
          "Ba nh√≥m, m·ªói nh√≥m hai qu·∫£ cam. Ba nh√¢n hai b·∫±ng s√°u.",
          "B·ªën nh√≥m, m·ªói nh√≥m nƒÉm b√¥ng hoa. B·ªën nh√¢n nƒÉm b·∫±ng hai m∆∞∆°i.",
        ];
        let i = 0;
        function next() {
          if (i >= sentences.length) return;
          speak(sentences[i]);
          i++;
          setTimeout(next, 2000);
        }
        next();
      }

      function renderLesson() {
        const table = parseInt(document.getElementById("tableSelect").value);
        const eq = document.getElementById("equations");
        eq.innerHTML = "";
        for (let i = 1; i <= 10; i++) {
          const div = document.createElement("div");
          div.className = "equation";
          div.innerHTML = `<span>${table} √ó ${i} = ${
            table * i
          }</span><button>üîä</button>`;
          const btn = div.querySelector("button");
          btn.addEventListener("click", () =>
            speak(`${table} nh√¢n ${i} b·∫±ng ${table * i}`)
          );
          eq.appendChild(div);
        }
      }

      document.getElementById("btnListenAll").addEventListener("click", () => {
        const table = parseInt(document.getElementById("tableSelect").value);
        let i = 1;
        function next() {
          if (i > 10) return;
          speak(`${table} nh√¢n ${i} b·∫±ng ${table * i}`);
          i++;
          setTimeout(next, 1600);
        }
        next();
      });

      // luy·ªán t·∫≠p
      let current,
        score = 0,
        count = 0;
      function nextQuestion() {
        if (count >= 5) {
          showResult();
          return;
        }
        count++;
        const a = Math.ceil(Math.random() * 9),
          b = Math.ceil(Math.random() * 9);
        current = { a, b, ans: a * b };
        document.getElementById("question").textContent = `${a} √ó ${b} = ?`;
        const ch = document.getElementById("choices");
        ch.innerHTML = "";
        const options = new Set([current.ans]);
        while (options.size < 4) options.add(Math.ceil(Math.random() * 81));
        Array.from(options)
          .sort(() => Math.random() - 0.5)
          .forEach((v) => {
            const d = document.createElement("div");
            d.className = "choice";
            d.textContent = v;
            d.onclick = () => {
              document
                .querySelectorAll(".choice")
                .forEach((c) => c.classList.remove("selected"));
              d.classList.add("selected");
              current.sel = v;
            };
            ch.appendChild(d);
          });
      }
      function checkAnswer() {
        if (!current.sel) {
          alert("H√£y ch·ªçn ƒë√°p √°n!");
          return;
        }
        if (current.sel === current.ans) {
          score++;
          speak("Gi·ªèi l·∫Øm!");
          alert("ƒê√∫ng r·ªìi!");
        } else {
          speak("Ch∆∞a ƒë√∫ng, th·ª≠ l·∫°i nh√©!");
          alert("Sai r·ªìi.");
        }
        if (count >= 5) {
          showResult();
        }
      }
      function showResult() {
        document.getElementById("scoreValue").textContent = score;
        showSection("result");
        speak(`B√© ƒë∆∞·ª£c ${score} ƒëi·ªÉm! R·∫•t tuy·ªát v·ªùi!`);
      }
      function restart() {
        score = 0;
        count = 0;
        current = null;
        showSection("practice");
      }
    </script>
  </body>
</html>
